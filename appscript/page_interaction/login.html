<!DOCTYPE html>
<html>

<head>
    <base target="_top">
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.12/dist/vue.js"></script>
    <script>
        window.fbAsyncInit = function() {
          FB.init({
            appId            : '177470164010190',
            autoLogAppEvents : true,
            xfbml            : true,
            version          : 'v9.0'
          });
          FB.getLoginStatus(function(response) {
              if (response.status === 'connected') {
                  console.log(response.authResponse.accessToken);
                  FB.api('/me', function(response) {
                        console.log(JSON.stringify(response));
                        
                        // send the token to the server
                        google.script.run.withSuccessHandler().uploadFacebookToken(JSON.stringify(response['authResponse']))

                    });
              }
          });
        };
        function checkLoginState(e){
            console.log(e)
        }
      </script>
      <script async defer crossorigin="anonymous" src="https://connect.facebook.net/en_US/sdk.js"></script>
        
</head>

<body>
    <fb:login-button 
        scope="public_profile,email, pages_read_engagement, pages_manage_metadata, pages_read_user_content, pages_manage_ads, pages_manage_posts, pages_manage_engagement"
        onlogin="checkLoginState();">
    </fb:login-button>
</body>

</html>
